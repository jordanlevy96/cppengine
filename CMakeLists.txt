cmake_minimum_required(VERSION 3.12)
set(CMAKE_CXX_STANDARD 11)
project(MyGameEngine)

# Handle Dependencies

find_package(OpenGL REQUIRED)

if (APPLE)
    include(FetchContent)

    FetchContent_Declare(
            GLFW
            URL https://github.com/glfw/glfw/archive/master.zip
        )

    FetchContent_MakeAvailable(GLFW)

    FetchContent_Declare(
        GLAD
        URL https://github.com/Dav1dde/glad/archive/master.zip
    )

    FetchContent_MakeAvailable(GLAD)

else() # WSL
    add_subdirectory(lib/glad)
    find_package(glfw3 REQUIRED)
endif()

# Build Instructions
file(GLOB_RECURSE SOURCES "src/*.cpp" "ext/glad/src/*.c")
add_executable(${CMAKE_PROJECT_NAME} ${SOURCES})
include_directories(include)
target_link_libraries(MyGameEngine PRIVATE glad dl glfw)

target_link_libraries(MyGameEngine PRIVATE ${OPENGL_LIBRARIES})
